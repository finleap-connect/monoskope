# Dev cluster environment values for monoskope.

nameOverride: ""
fullnameOverride: ""

global:
  imagePullSecrets:
    - name: gitlab-registry

dex:
  enabled: true
  replicas: 3
  config:
    issuer: &issuer https://monoskope.dev.finleap.cloud/dex
    enablePasswordDB: false
    connectors:
      - type: gitlab
        id: gitlab-dev
        name: GitLab DEV
        config:
          baseURL: "https://gitlab.figo.systems"
          clientID: "{{ .gitlabClientId }}"
          clientSecret: "{{ .gitlabClientSecret }}"
          redirectURI: https://monoskope.dev.finleap.cloud/dex/callback
          groups:
            - "wolke7"
          use_login_as_id: false

cockroachdb:
  enabled: true
  statefulset:
    replicas: 5
  storage:
    persistentVolume:
      size: "1Gi"

rabbitmq:
  enabled: true
  replicaCount: 5

gateway:
  replicaCount: 3
  auth:
    issuerURL: *issuer
  ingress:
    enabled: true
    host: api.monoskope.dev.finleap.cloud
  resources:
    limits:
      cpu: 2000m
      memory: 128Mi
    requests:
      cpu: 500m
      memory: 64Mi

eventstore:
  replicaCount: 3
  enabled: true
  messageBus:
    tlsSecret: monoskope-rabbitmq-auth-evenstore
  storeDatabase:
    tlsSecret: monoskope-crdb-auth-evenstore
  resources:
    limits:
      cpu: 2000m
      memory: 128Mi
    requests:
      cpu: 500m
      memory: 64Mi

commandhandler:
  replicaCount: 3
  enabled: true
  resources:
    limits:
      cpu: 2000m
      memory: 128Mi
    requests:
      cpu: 500m
      memory: 64Mi

queryhandler:
  replicaCount: 3
  enabled: true
  resources:
    limits:
      cpu: 2000m
      memory: 128Mi
    requests:
      cpu: 500m
      memory: 64Mi
  messageBus:
    tlsSecret: monoskope-rabbitmq-auth-queryhandler

ingress:
  enabled: true
  host: monoskope.dev.finleap.cloud
